sap.ui.define(["sap/ui/core/mvc/ControllerExtension"],function(e){"use strict";var t="divya.sharma@peolsolutions.com";return e.extend("dep.ext.controller.ListEmail",{override:{onInit:function(){},routing:{onBeforeBinding:async function(){debugger;var e=this.base.getExtensionAPI().getModel();if(!e){console.error("Model is not available.");return}var i;if(typeof e.getServiceUrl==="function"){i=e.getServiceUrl();console.log("Service URL:",i)}else{console.error("Unable to determine the service URL.");return}try{const e=await new Promise((e,t)=>{jQuery.ajax({url:i+"/authorisation",method:"GET",dataType:"json",success:function(t){e(t)},error:function(e,i,n){t(new Error(i+": "+n))}})});console.log("Fetched data:",e);if(e&&e.value&&Array.isArray(e.value)){const i=e.value.filter(e=>e.Email===t).map(e=>e.role)[0];debugger;console.log(i);if(i!=="Admin"){this.base.getView().findAggregatedObjects(true,function(e){return e.isA("sap.m.Button")&&(e.getId().includes("Create")||e.getId().includes("Delete"))}).forEach(function(e){e.setVisible(false)});this.base.getView().findAggregatedObjects(true,function(e){return e.isA("sap.m.Button")&&(e.getId().includes("Draft")||e.getId().includes("Save"))}).forEach(function(e){e.setVisible(false)});this.base.getView().findAggregatedObjects(true,function(e){return e.isA("sap.m.Input")&&e.getId().includes("Draft")}).forEach(function(e){e.setEditable(false)});this.base.getView().findAggregatedObjects(true,function(e){return e.isA("sap.m.Select")&&e.getId().includes("EditingStatus")}).forEach(function(e){e.setSelectedKey("All");e.setEnabled(false)});const e=this.base.getView().getContent()[0].mAggregations.content.mAggregations.content.mAssociations.filter;var n=sap.ui.getCore().byId(e);var r={$editState:[{operator:"DRAFT_EDIT_STATE",values:["ALL_HIDING_DRAFTS","All (Hiding Drafts)"],validated:"Validated"}]};n.setFilterConditions(r)}if(i===undefined){this.base.getView().findAggregatedObjects(true,function(e){if(e.isA("sap.fe.macros.controls.FilterBar")){e.setVisible(false)}})}}}catch(e){console.error("Error fetching data",e)}}}}})});
//# sourceMappingURL=ListEmail.controller.js.map