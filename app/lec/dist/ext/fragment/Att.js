sap.ui.define(["sap/m/MessageToast"],function(e){"use strict";return{onAfterItemAdded:async function(e){debugger;var t=e.oSource.getModel().getServiceUrl();var r=/Teacher\([^)]*\)/;var a=window.location.href.match(r);if(a){var o=a[0]}var i=e.getParameter("item");var l={mediaType:i.getMediaType(),fileName:i.getFileName(),size:i.getFileObject().size};var s={url:t+o+"/TeatoFile",method:"POST",headers:{"Content-type":"application/json"},data:JSON.stringify(l)};try{const e=await new Promise((e,t)=>{$.ajax(s).done((t,r,a)=>{e(t.ID)}).fail(e=>{t(e)})});debugger;var n=t+`Files(ID=${e},IsActiveEntity=false)/content`;i.setUploadUrl(n);i.setUrl(n);var c=this.byId("uploadSet");c.setHttpRequestMethod("PUT");c.uploadItem(i)}catch(e){console.log(e)}},onUploadCompleted:function(e){debugger;var t=this.byId("uploadSet");t.removeAllIncompleteItems()},onOpenPressed:function(e){debugger;var t=e.oSource.getModel().getServiceUrl();let r=e.oSource.mProperties.url;var a=/Files.*$/;var o=r.match(a);if(o){var i=t+o[0]}e.oSource.mProperties.url=i},onAfterItemRemoved:function(e){debugger;var t=e.oSource.getModel().getServiceUrl();const r=/^(.*?),IsActiveEntity=/;let a=e.mParameters.item.mProperties.url.match(r);let o=a[1]+",IsActiveEntity=false)";o=o.replace(/^.*\/Files/,"/Files");$.ajax({url:t+o,method:"DELETE"})}}});
//# sourceMappingURL=Att.js.map