//@ui5-bundle lec/Component-preload.js
sap.ui.require.preload({
	"lec/Component.js":function(){
sap.ui.define(["sap/fe/core/AppComponent"],function(e){"use strict";return e.extend("lec.Component",{metadata:{manifest:"json"}})});
},
	"lec/ext/controller/Listteacher.controller.js":function(){
sap.ui.define(["sap/ui/core/mvc/ControllerExtension"],function(e){"use strict";var t="divya.sharma@peolsolutions.com";var t;return e.extend("lec.ext.controller.Listteacher",{override:{onInit:function(){debugger;var e=this.base.getExtensionAPI().getModel()},routing:{onBeforeBinding:async function(){debugger;var e=this.base.getExtensionAPI().getModel();if(!e){console.error("Model is not available.");return}var r;if(typeof e.getServiceUrl==="function"){r=e.getServiceUrl();console.log("Service URL:",r)}else{console.error("Unable to determine the service URL.");return}try{const e=await new Promise((e,t)=>{jQuery.ajax({url:r+"/authorisation",method:"GET",dataType:"json",success:function(t){e(t)},error:function(e,r,o){t(new Error(r+": "+o))}})});console.log("Fetched data:",e);if(e&&e.value&&Array.isArray(e.value)){const r=e.value.filter(e=>e.Email===t).map(e=>e.role)[0];debugger;console.log(r);if(r!=="Admin"){this.base.getView().findAggregatedObjects(true,function(e){return e.isA("sap.m.Button")&&(e.getId().includes("Create")||e.getId().includes("Delete"))}).forEach(function(e){e.setVisible(false)});this.base.getView().findAggregatedObjects(true,function(e){return e.isA("sap.fe.macros.controls.FilterBar")}).forEach(function(e){e.setVisible(true)});this.base.getView().getContent()[0].mAggregations.header.mAggregations.content[0].mAggregations.items[0].mAggregations.content.setFilterConditions({$editState:[{operator:"DRAFT_EDIT_STATE",values:["ALL_HIDING_DRAFTS"],validated:"Validated"}]})}}}catch(e){console.error("Error fetching data",e)}}}}})});
},
	"lec/ext/controller/Objectteacher.controller.js":function(){
sap.ui.define(["sap/ui/core/mvc/ControllerExtension"],function(e){"use strict";var t="divya.sharma@peolsolutions.com";var t;return e.extend("lec.ext.controller.Objectteacher",{override:{onInit:function(){debugger;var e=this.base.getExtensionAPI().getModel()},routing:{onBeforeBinding:async function(e){debugger;var t=this.getView().getModel("ui");var a=t.oData.editMode;var n=this.base.getView().byId("lec::TeacherObjectPage--fe::CustomSubSection::Att--uploadSet");var i=n.getBindingInfo("items");var r=i.template;if(a=="Editable"){n.setUploadButtonInvisible(false);r.setVisibleRemove(true);r.setVisibleEdit(true);n.setUploadEnabled(true)}else{n.setUploadButtonInvisible(true);r.setVisibleRemove(false);r.setVisibleEdit(false);n.setUploadEnabled(false)}debugger;var o=this.base.getExtensionAPI().getModel();if(!o){console.error("Model is not available.");return}const s=this.base.getView();const l=s.mAggregations.content[0];debugger;const u=l.findAggregatedObjects(true,function(e){return e.isA("sap.m.Button")&&(e.getId().includes("Save")||e.getId().includes("Edit")||e.getId().includes("Delete"))});const c=u[0];const d=u[1];const g=u[2];setTimeout(function(){debugger;if(g.getText().includes("Create")){g.setText("Send for Approval")}}.bind(this),1e3);var f;if(typeof o.getServiceUrl==="function"){f=o.getServiceUrl();console.log("Service URL:",f)}else{console.error("Unable to determine the service URL.");return}debugger;this.adjustUIControls();await this.fetchAndProcessData(f)}}},adjustUIControls:function(){var e=this;setTimeout(function(){e.base.getView().findAggregatedObjects(true,function(e){return e.isA("sap.m.Button")||e.isA("sap.m.DatePicker")||e.isA("sap.m.Input")||e.isA("sap.m.TextArea")||e.isA("sap.m.ComboBox")}).forEach(function(t){var a=t.getId();if(t.isA("sap.m.Input")&&a.includes("Age")){t.setEditable(false)}if(t.isA("sap.m.DatePicker")&&a.includes("Dob")){t.attachChange(function(){var a=t.getDateValue();if(a){var n=e.calculateAge(a);e.setAgeField(n)}});var n=t.getDateValue();if(n){var i=e.calculateAge(n);e.setAgeField(i)}}if(t.isA("sap.m.Button")&&a.includes("Save")&&t.getVisible()===true){debugger;var r=this.base.getView();var o=r.findAggregatedObjects(true);var s=o.filter(function(e){return e.getId().includes("uploadSet-uploader")});s.forEach(function(e){e.setVisible(true)});var l=o.filter(function(e){return e.getId().includes("uploadSet")});l.forEach(function(e){console.log("Control ID:",e.getId());console.log("Control Type:",e.getMetadata().getName());if(e.isA("sap.m.Button")&&e.getId().includes("deleteButton")){e.setVisible(true);e.setEnabled(true)}})}if(t.isA("sap.m.Button")&&a.includes("Save")&&t.getVisible()===false){debugger;var r=this.base.getView();var o=r.findAggregatedObjects(true);var s=o.filter(function(e){return e.getId().includes("uploadSet-uploader")});s.forEach(function(e){e.setVisible(false)});var l=o.filter(function(e){return e.getId().includes("uploadSet")});l.forEach(function(e){console.log("Control ID:",e.getId());console.log("Control Type:",e.getMetadata().getName());if(e.isA("sap.m.Button")&&e.getId().includes("deleteButton")){e.setVisible(false);e.setEnabled(false)}})}if(t.isA("sap.m.Input")&&a.includes("Age")){var u=e.base.getView().byId("nwteacher::TeacherObjectPage--fe::FormContainer::GeneratedFacet1::FormElement::DataField::DOB::Field-edit");if(u){var n=u.getDateValue();if(n){var i=e.calculateAge(n);t.setValue(i)}}}}.bind(e))}.bind(e),500)},calculateAge:function(e){var t=new Date;var a=new Date(e);if(a>t){alert("Birthdate is in the future. Age cannot be calculated.");console.log("Birthdate is in the future. Age cannot be calculated.");return null}var n=t.getFullYear()-a.getFullYear();var i=t.getMonth()-a.getMonth();if(i<0||i===0&&t.getDate()<a.getDate()){n--}if(n>=18){return n}else{alert("You must be at least 18 years old.");return null}},setAgeField:function(e){var t=this;setTimeout(function(){t.base.getView().findAggregatedObjects(true,function(e){return e.isA("sap.m.Input")&&e.getId().includes("Age")}).forEach(function(t){t.setValue(e);console.log("Age field set to:",e)})}.bind(t),500)},fetchAndProcessData:async function(e){var a=this;try{const a=await new Promise((t,a)=>{jQuery.ajax({url:e+"/authorisation",method:"GET",dataType:"json",success:function(e){t(e)},error:function(e,t,n){a(new Error(t+": "+n))}})});const u=await new Promise((t,a)=>{jQuery.ajax({url:e+"/Department",method:"GET",dataType:"json",success:function(e){t(e)},error:function(e,t,n){a(new Error(t+": "+n))}})});debugger;console.log("Fetched auth data:",a);console.log("Fetched dept data:",u);if(a&&a.value&&Array.isArray(a.value)&&u&&u.value&&Array.isArray(u.value)){var n=a.value.find(e=>e.Email===t);if(!n){debugger;console.error("User not found in authorisation data.");return}var i=n.role;console.log(`User Role: ${i}`);var r=this.getView().getBindingContext();var o=r.getPath();var s=null;var l=o.match(/DepartmentID='([^']+)'/);if(l&&l[1]){s=l[1]}if(i!==s&&i!=="Admin"){this.base.getView().findAggregatedObjects(true,function(e){return e.isA("sap.m.Button")}).forEach(function(e){if(e.getId().includes("Edit")||e.getId().includes("Delete")||e.getId().includes("Create")){e.setVisible(false)}})}if(i!=="Admin"){debugger;this.base.getView().findAggregatedObjects(true,function(e){return e.isA("sap.m.Input")&&e.getBindingPath("value")==="DepartmentName"}).forEach(function(e){e.setEditable(false)})}}}catch(e){console.error("Error fetching data",e)}try{var u=window.location.href;var c=u.split("#")[1];console.log(c);var d=c.match(/ttuuid=([^,]+)/)[1];console.log(d);const t=await new Promise((t,a)=>{jQuery.ajax({url:`${e}/Teacher(ttuuid=${d},IsActiveEntity=true)`,method:"GET",dataType:"json",success:function(e){t(e)},error:function(e,t,n){console.error("Error fetching role data",e,t,n);a(new Error(t+": "+n))}})});console.log(t);var i;if(t&&t.Status){console.log(t.Status);if(t.Status==="Approved"){i=t.Status;console.log("userRole: ",i)}}else{console.log("No data found or invalid response format")}this.base.getView().findAggregatedObjects(true,function(e){return e.isA("sap.m.Button")}).forEach(function(e){if(e.getId().includes("Edit")||e.getId().includes("Delete")){if(i==="Approved"){e.setVisible(true);e.setEnabled(true)}else{e.setVisible(false);e.setEnabled(false)}}})}catch(e){console.error("Error fetching role data",e)}}})});
},
	"lec/ext/fragment/Att.fragment.xml":'<core:FragmentDefinition  xmlns:core="sap.ui.core"\n                         xmlns="sap.m"\n                         xmlns:upload="sap.m.upload"\n                         xmlns:macros="sap.fe.macros"><VBox id="_IDGenVBox1" core:require="{ handler: \'lec/ext/fragment/Att\'}"><upload:UploadSet\n            id="uploadSet"\n            instantUpload="false"\n            uploadEnabled="true"\n            afterItemAdded="handler.onAfterItemAdded"\n            afterItemRemoved="handler.onAfterItemRemoved"\n\n\n             \n    items="{path: \'TeatoFile\', \n           parameters: { $orderby: \'createdAt desc\' } , \n           templateShareable: false}"\n           mode="MultiSelect" ><upload:toolbar><OverflowToolbar id="_IDGenOverflowToolbar1"><ToolbarSpacer id="_IDGenToolbarSpacer1"/><upload:UploadSetToolbarPlaceholder id="_IDGenUploadSetToolbarPlaceholder1" /></OverflowToolbar></upload:toolbar><upload:items><upload:UploadSetItem id="_IDGenUploadSetItem1"\n                    fileName="{fileName}"\n                    mediaType="{mediaType}"\n                    url="{url}"\n                    enabledEdit="true"\n                    visibleEdit="true"\n                    openPressed="handler.onOpenPressed"><upload:attributes><ObjectAttribute id="_IDGenObjectAttribute1"\n                            title="Uploaded By"\n                            text="{createdBy}"\n                            active="false"/><ObjectAttribute id="_IDGenObjectAttribute2"\n                            title="Uploaded on"\n                            text="{createdAt}"\n                            active="false"/><ObjectAttribute id="_IDGenObjectAttribute3"\n                            title="File Size"\n                            text="{size}"\n                            active="false"/></upload:attributes></upload:UploadSetItem></upload:items></upload:UploadSet></VBox></core:FragmentDefinition>',
	"lec/ext/fragment/Att.js":function(){
sap.ui.define(["sap/m/MessageToast"],function(e){"use strict";return{onAfterItemAdded:async function(e){debugger;var t=e.oSource.getModel().getServiceUrl();var r=/Teacher\([^)]*\)/;var a=window.location.href.match(r);if(a){var o=a[0]}var i=e.getParameter("item");var l={mediaType:i.getMediaType(),fileName:i.getFileName(),size:i.getFileObject().size};var s={url:t+o+"/TeatoFile",method:"POST",headers:{"Content-type":"application/json"},data:JSON.stringify(l)};try{const e=await new Promise((e,t)=>{$.ajax(s).done((t,r,a)=>{e(t.ID)}).fail(e=>{t(e)})});debugger;var n=t+`Files(ID=${e},IsActiveEntity=false)/content`;i.setUploadUrl(n);i.setUrl(n);var c=this.byId("uploadSet");c.setHttpRequestMethod("PUT");c.uploadItem(i)}catch(e){console.log(e)}},onUploadCompleted:function(e){debugger;var t=this.byId("uploadSet");t.removeAllIncompleteItems()},onOpenPressed:function(e){debugger;var t=e.oSource.getModel().getServiceUrl();let r=e.oSource.mProperties.url;var a=/Files.*$/;var o=r.match(a);if(o){var i=t+o[0]}e.oSource.mProperties.url=i},onAfterItemRemoved:function(e){debugger;var t=e.oSource.getModel().getServiceUrl();const r=/^(.*?),IsActiveEntity=/;let a=e.mParameters.item.mProperties.url.match(r);let o=a[1]+",IsActiveEntity=false)";o=o.replace(/^.*\/Files/,"/Files");$.ajax({url:t+o,method:"DELETE"})}}});
},
	"lec/i18n/i18n.properties":'# This is the resource bundle for lec\n\n#Texts for manifest.json\n\n#XTIT: Application name\nappTitle=Lec app\n\n#YDES: Application description\nappDescription=An SAP Fiori application.\n\n#XFLD,24\nflpTitle=Hire Lec\n\n#XFLD,24\nflpTitle=Hire lec\n\n#XTIT: Title of the application\nlecturerApp=Lecturer App\n\n#XTIT: Title of the application\nLecturer App=Lecturer App\n',
	"lec/manifest.json":'{"_version":"1.59.0","sap.app":{"id":"lec","type":"application","i18n":"i18n/i18n.properties","applicationVersion":{"version":"0.0.1"},"title":"{{Lecturer App}}","description":"{{appDescription}}","resources":"resources.json","sourceTemplate":{"id":"@sap/generator-fiori:lrop","version":"1.14.1","toolsId":"b784b639-6594-4591-9232-c0e65ef593aa"},"dataSources":{"mainService":{"uri":"odata/v4/my/","type":"OData","settings":{"annotations":[],"odataVersion":"4.0"}}},"crossNavigation":{"inbounds":{"lec-display":{"semanticObject":"lec","action":"display","title":"{{flpTitle}}","signature":{"parameters":{},"additionalParameters":"allowed"}},"lec1-display":{"semanticObject":"lec1","action":"display","title":"{{flpTitle}}","signature":{"parameters":{},"additionalParameters":"allowed"}}}}},"sap.ui":{"technology":"UI5","icons":{"icon":"","favIcon":"","phone":"","phone@2":"","tablet":"","tablet@2":""},"deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"flexEnabled":true,"dependencies":{"minUI5Version":"1.126.1","libs":{"sap.m":{},"sap.ui.core":{},"sap.ushell":{},"sap.fe.templates":{},"sap.f":{}}},"contentDensities":{"compact":true,"cozy":true},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","settings":{"bundleName":"lec.i18n.i18n"}},"":{"dataSource":"mainService","preload":true,"settings":{"operationMode":"Server","autoExpandSelect":true,"earlyRequests":true}},"@i18n":{"type":"sap.ui.model.resource.ResourceModel","uri":"i18n/i18n.properties"}},"resources":{"css":[]},"routing":{"config":{},"routes":[{"pattern":":?query:","name":"TeacherList","target":"TeacherList"},{"pattern":"Teacher({key}):?query:","name":"TeacherObjectPage","target":"TeacherObjectPage"}],"targets":{"TeacherList":{"type":"Component","id":"TeacherList","name":"sap.fe.templates.ListReport","options":{"settings":{"contextPath":"/Teacher","navigation":{"Teacher":{"detail":{"route":"TeacherObjectPage"}}},"variantManagement":"None","defaultTemplateAnnotationPath":"com.sap.vocabularies.UI.v1.SelectionPresentationVariant#tableView","views":{"paths":[{"key":"tableView","annotationPath":"com.sap.vocabularies.UI.v1.SelectionPresentationVariant#tableView"},{"key":"tableView5","annotationPath":"com.sap.vocabularies.UI.v1.SelectionPresentationVariant#tableView5"},{"key":"tableView4","annotationPath":"com.sap.vocabularies.UI.v1.SelectionPresentationVariant#tableView4"}]}}}},"TeacherObjectPage":{"type":"Component","id":"TeacherObjectPage","name":"sap.fe.templates.ObjectPage","options":{"settings":{"contextPath":"/Teacher","navigation":{},"editableHeaderContent":false,"content":{"body":{"sections":{"Att":{"template":"lec.ext.fragment.Att","position":{"placement":"After","anchor":"Teacher"},"title":"Attach a File"}}}}}}}}},"extends":{"extensions":{"sap.ui.controllerExtensions":{"sap.fe.templates.ListReport.ListReportController":{"controllerName":"lec.ext.controller.Listteacher"},"sap.fe.templates.ObjectPage.ObjectPageController":{"controllerName":"lec.ext.controller.Objectteacher"}}}}},"sap.fiori":{"registrationIds":[],"archeType":"transactional"},"sap.cloud":{"public":true,"service":"lecturerapp"}}'
});
//# sourceMappingURL=Component-preload.js.map
